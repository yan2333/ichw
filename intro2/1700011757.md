概论作业3

1.SSD 硬盘的工作原理是什么？有哪些优点和缺点？

固态硬盘（Solid State Drives），即SSD，其内部主体其实就是一块印制电路板，板子上基本配置是控制芯片、缓存芯片（可无）和用于存储数据的闪存芯片。固态硬盘和传统硬盘一样需要高速的缓存芯片辅助主控芯片进行数据处理。

确切的说，SSD主要由SSD控制器，FLASH存储阵列，板上DRAM（可选），以及跟HOST接口（诸如SATA，SAS, PCIe等）组成。SSD主控通过若干个通道并行操作多块FLASH颗粒大大提高底层的带宽。要提高底层带宽，可以增加底层并行的颗粒数目，也可以选择速度快的FLASH颗粒（或者让速度慢的颗粒变快，比如MLC配成SLC使用）。HOST是通过LBA（Logical Block Address，逻辑地址块）访问SSD的，每个LBA代表着一个Sector（一般为512B大小），操作系统一般以4K为单位访问SSD，我们把HOST访问SSD的基本单元叫用户页（Host Page）。而在SSD内部，SSD主控与FLASH之间是FLASH Page为基本单元访问FLASH的，我们称FLASH Page为物理页（Physical Page）。HOST每写入一个Host Page, SSD主控会找一个Physical Page把Host数据写入，SSD内部同时记录了这样一条映射（Map）。有了这样一个映射关系后，下次HOST需要读某个Host Page 时，SSD就知道从FLASH的哪个位置把数据读取上来。SSD内部维护了一张映射表（Map Table），HOST每写入一个Host Page，就会产生一个新的映射关系，这个映射关系会加入（第一次写）或者更改（覆盖写）Map Table；当读取某个Host Page时， SSD首先查找Map Table中该Host Page对应的Physical Page，然后再访问Flash读取相应的Host数据。对绝大多数SSD，我们可以看到上面都有板载DRAM，其主要作用就是用来存储这张映射表。当整个SSD写满后，从用户角度来看，如果想写入新的数据，则必须删除一些数据，然后腾出空间再写。用户在删除和写入数据的过程中，会导致一些Block里面的数据变无效或者变老。数据变老或者无效，是指没有任何映射关系指向它们，用户不会访问到这些FLASH空间，它们被新的映射关系所取代。随着HOST的持续写入，FLASH存储空间慢慢变小，直到耗尽。如果不及时清除这些垃圾数据，HOST就无法写入。SSD内部都有垃圾回收机制，它的基本原理是把几个Block中的有效数据（非垃圾数据，上图中的绿色小方块表示的）集中搬到一个新的Block上面去，然后再把这几个Block擦除掉，这样就产生新的可用Block了。刚买的SSD，你会发现写入速度很快，那是因为一开始总能找到可用的Block来进行写入。但是，随着你对SSD的使用，你会发现它会变慢。原因就在于SSD写满后，当你需要写入新的数据，往往需要做上述的垃圾回收：把若干个Block上面的有效数据搬移到某个Block，然后擦掉原先的Block，然后再把你的Host数据写入。这比最初单纯的找个可用的Block来写耗时多了，所以速度变慢也就可以理解了。SSD内部需要预留空间，这部分HOST是看不到的。

对比SSD和传统硬盘，设计及数据读写原理的不同，使得其内部的构造亦有很大的不同。普通的机械磁盘，其数据读写是靠盘片的高速旋转所产生的气流来托起磁头，使得磁头无限接近盘片，而又不接触，并由步进电机来推动磁头进行换道数据读取。所以其内部构造相对较为复杂，也较为精密，一般情况下不允许拆卸。

SSD的优缺点都是非常明显的。首先来谈优点。

读写速度快是SSD突出的优势，采用闪存作为存储介质，读取速度相对机械硬盘更快。固态硬盘不用磁头，寻道时间几乎为0。持续写入的速度非常惊人，而随机读写速度快更是SSD的惊艳之处。这最直接体现在绝大部分的日常操作中。与之相关的还有极低的存取时间。

防震抗摔。传统硬盘都是磁碟型的，数据储存在磁碟扇区里。而固态硬盘是使用闪存颗粒的，内部不存在任何机械部件高速移动甚至伴随翻转倾斜的情况下也不会影响到正常使用，而且在发生碰撞和震荡时能够将数据丢失的可能性降到最小。

固态硬盘的功耗上要低于传统硬盘。

固态硬盘在重量方面更轻，体积通常更小。

无噪音。固态硬盘没有机械马达和风扇，工作时噪音值为0分贝。

基于闪存的固态硬盘在工作状态下能耗和发热量较低（但高端或大容量产品能耗会较高）。内部不存在任何机械活动部件，不会发生机械故障，也不怕碰撞、冲击、振动。由于固态硬盘采用无机械部件的闪存芯片，所以具有了发热量小、散热快等特点。

工作温度范围大。典型的硬盘驱动器只能在5到55摄氏度范围内工作。而大多数固态硬盘可在-10~70摄氏度工作。其芯片的工作温度范围很宽（-40~85摄氏度）。

固态硬盘的接口规范和定义、功能及使用方法上与普通硬盘的相同，在产品外形和尺寸上也与普通硬盘一致。

容量曾经是固态硬盘的硬伤。目前最大的固态硬盘有60TB容量，甚至比机械硬盘更大。

接下来是缺点。

固态硬盘闪存具有擦写次数限制的问题。在实际使用中，用户更多的操作是随机写，而不是连续写，所以在使用寿命内，出现坏道的机率会更高。另外，虽然固态硬盘的每个扇区可以重复擦写100000次(SLC)，但某些应用，如操作系统的LOG记录等，可能会对某一扇区进行多次反复读写，而这种情况下，固态硬盘的实际寿命还未经考验。不过通过均衡算法对存储单元的管理，其预期寿命会延长。SLC有10万次的写入寿命，成本较低的MLC，写入寿命仅有1万次,而廉价的TLC闪存则更是只有可怜的500-1000次。

售价高。市场上的128GB 固态硬盘产品的价格大约在在550元人民币左右，而256GB的产品价格大约在950元人民币（2014年价格）左右。计算下来，每GB价格在4.2元人民币（2014年价格）左右，依然比传统机械硬盘每 GB 0.3元人民币（2014年价格）的价格高出了十几倍。市场上128GB MLC（多层单元）固态硬盘，一般价格为550元（2014年）左右,部分较型号甚至达到750元左右。而这个价钱足够买一个容量3TB的传统硬盘了。128GB SLC（单层单元）固态硬盘价格则高达2000元以上。

注意，不要使用碎片整理。碎片整理会大大减少固态硬盘的使用寿命。其实，固态硬盘的垃圾回收机制就已经是一种很好的“磁盘整理”，再多的整理完全没必要。Windows的“磁盘整理”功能是机械硬盘时代的产物，并不适用于SSD。


2.现代计算机系统中到处都用到了缓存。你打开浏览器, 访问某网站, 查看了一幅图片, 请描述可能有哪些缓存系统参与了该过程？

可能参与的有L1 Cache,L2 Cache,内存，存储器，应该不会用到Register


3.请调研处理器和存储技术的发展趋势.

未来的处理器预计会朝着多核、多通道、集成内存、集成显卡、节能、减小面积、提高集成度、散热性更好、更满足消费者需求的方向发展。

回顾历史，我们可以预测处理器的一个发展趋势是性能更加强大，架构更加优化。性能毕竟是硬道理。提高处理器的运行速度，提高时钟频率虽然是一种传统的并且证明是有效的方法，但也衍生出了能耗和散热的问题。改变处理器的架构，提高并行性能，提高集成度，增加高速缓存，改进总线结构、接口技术、指令集似乎是更加可靠的。

功耗更低,制造工艺更加先进.我们去看CPU的发展历史，会发现，每次换代的时候，CPU的性能在提高，而功耗却逐步降低，虽然不完全是，但随着能源危机的加剧，大家在挑选CPU的时候，已经越来越注重CPU的功耗。低功耗不代表性能的降低，反而更低的功耗代表着技术的领先。制作工艺更加“纳米”，CPU的功耗就将变的更低，温度也将更低，而同一个核心的CPU,在不同的制造工艺下，其超频的性能也大不一样。

CPU和GPU混合化，显卡作为玩转游戏的基本保证，越来越受到人们的关注，GPU作为显卡的核心部件，技术也在飞快进步，GPU在浮点运算以及其他很多方面的计算能力已经大大超越了当前的CPU。CPU和GPU的融合是可以预见的。

总而言之，摩尔定律让我们可以预料到未来CPU发展的大致情况。毫无疑问，高性能、低能耗、高速度和低成本是未来的发展方向。

至于存储技术，SSD固态硬盘的推广是一个重要趋势。行业厂商将继续快速将个人电脑和笔记本电脑，以及高端存储系统更换为SSD固态硬盘。因为没有移动部件，也就越来越可靠，存储速度更快，现在甚至比较小尺寸的HDD硬盘提供更多的容量，而所有这些都是AES加密的选择。如今所有存储硬件的最大变化将是从2D到3D NAND（越来越多的堆叠）的巨大变化，以获得更大的容量和更低的价格。

对HDD的改良也是一个可能。HDD硬盘的面积密度极难增加。现在唯一的办法是在单元内添加更多的磁盘到充满氦气的驱动器中。人们继续等待，期望能看到HDD和SMR是否会在全球市场下滑中重振旗鼓。也许有机会首先通过基于热辅助磁记录（HAMR）的HDD硬盘得以推出，通过激光等技术手段以提高磁盘上的面密度，但可能不会提供存储性能。这两个不同存储器的每GB的价格将会继续下降，在很大程度上有利于机械硬盘的市场销售，并且在过去几年中的出货量也在减少。而SSD硬盘的速度比HDD硬盘更快。但由于NAND芯片以及HDD及其部件的供应紧张，SSD的价格居高不下这一趋势将会持续一段时间。

随着闪存芯片容量的增加，U盘最高容量将达到2TB，这使替代外部HDD硬盘和SSD硬盘成为可能。

MRAM内存。这是一种近来未被Everspin和Nantero等公司普遍接受和推广的技术。

磁带市场将继续下滑，其技术被线性磁带开放协议LTO（第7代，6TB）所垄断，现在仅用于大容量冷存储与高容量近线HDD硬盘的竞争。相同的趋势正在发生在WORM光盘上。

备份。最好的方法是将用户站点上的备份（与HDD或存储子系统）以及外部的云存储的组合。这意味着在发生问题的情况下，总共会有三份数据副本：主存储，本地备份和外部备份。

业界将会解决PCIe/NVMe的一大难题，就像之前所说的那样，而由苹果公司推出的USB TypeC将成为所有笔记本电脑，PC甚至智能手机的主要接口。

融合和超融合是两大趋势。去年9月，Nutanix公司在上市之后，推出采用超融合存储在可扩展性，成本和存储效率方面得到了巨大增长。

全闪存阵列继续成为与闪存作为软件定义层次竞争的增长市场。随着SSD和HDD的混合配置，将会带来更大的市场发展。

单片存储子系统由一个较低价格的横向扩展架构所取代，该体系结构包括几个节点（具有HDD或SSD的服务器，可根据需要添加），该系统可以在一个快速的GbE网络上运行，最重要的是管理整个系统的软件，包括被分割在不同的节点上作为一个或多个数据副本的磁盘阵列控制器。

数据分析和人工智能将从存储的数据中产生价值。

公共云存储。这是毫无争议的。

最有潜力的存储市场是视频行业，包括监控和后期制作，图像定义的增加需要巨大的存储容量。
